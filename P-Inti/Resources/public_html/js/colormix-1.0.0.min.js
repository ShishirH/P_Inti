/*!
 *
 * ColorMix JavaScript Library v1.0.0
 * http://colormix.florentschildknecht.com
 *
 * Copyright 2013 @ Florent SCHILDKNECHT
 *
 * Date: 2013-05-23
 *
 */
var ColorMix=function(){var j=[{reference:0,color:{red:0,green:0,blue:0}},{reference:100,color:{red:255,green:255,blue:255}}],k=function(a,c,b){void 0!==a?void 0!==c&&void 0!==b?(this.setRed(parseInt(a)),this.setGreen(parseInt(c)),this.setBlue(parseInt(b))):"string"===typeof a&&this.fromHex(a):(this.setRed(0),this.setGreen(0),this.setBlue(0));return this};k.prototype={fromHex:function(a){a=String(a||"");if(0<a.length){"#"===a[0]&&(a=a.slice(1));3===a.length&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);var c=
parseInt(a.slice(0,2),16),b=parseInt(a.slice(2,4),16);a=parseInt(a.slice(4,6),16);this.setRed(isNaN(c)?0:c);this.setGreen(isNaN(b)?0:b);this.setBlue(isNaN(a)?0:a)}else this.setRed(0),this.setGreen(0),this.setBlue(0);return this},setRed:function(a){void 0!==a&&(this.red=Math.min(255,Math.max(0,parseInt(a))));return this},getRed:function(){return this.red},setGreen:function(a){void 0!==a&&(this.green=Math.min(255,Math.max(0,parseInt(a))));return this},getGreen:function(){return this.green},setBlue:function(a){void 0!==
a&&(this.blue=Math.min(255,Math.max(0,parseInt(a))));return this},getBlue:function(){return this.blue},toString:function(a){var c="";switch(a){case "rgb":c="rgb("+this.red+", "+this.green+", "+this.blue+")";break;case "rgba":c="rgba("+this.red+", "+this.green+", "+this.blue+", 1)";break;case "hsl":a=ColorMix.ColorSpace.RGBtoHSL(this.red,this.green,this.blue);c="hsl("+a.hue+", "+a.sat+"%, "+a.lig+"%)";break;case "hsla":a=ColorMix.ColorSpace.RGBtoHSL(this.red,this.green,this.blue);c="hsla("+a.hue+", "+
a.sat+"%, "+a.lig+"%, 1)";break;default:c="#"+(16777216+(this.red<<16)+(this.green<<8)+this.blue).toString(16).slice(1)}return c},useAsBackground:function(a){a=String(a);if(0<a.length)if(void 0!==window.jQuery)window.jQuery(a).css("background-color","rgb("+this.red+", "+this.green+", "+this.blue+")");else{var c,b;if("string"===typeof a)switch(a[0]){case "#":c=document.getElementById(a);break;case ".":if(document.getElementsByClassName)c=document.getElementsByClassName(a);else{c=[];var d=document.getElementsByTagName("*");
for(b=d.length;b--;)d[b].className===a.slice(1)&&c.push(d[b])}break;default:c=document.getElementsByTagName(a)}for(b=c.length;b--;)c[b].style["background-color"]="rgb("+this.red+", "+this.green+", "+this.blue+")"}return this},useAsColor:function(a){a=String(a);if(0<a.length)if(void 0!==window.jQuery)window.jQuery(a).css("color","rgb("+this.red+", "+this.green+", "+this.blue+")");else{var c,b;if("string"===typeof a)switch(a[0]){case "#":c=document.getElementById(a);break;case ".":if(document.getElementsByClassName)c=
document.getElementsByClassName(a);else{c=[];var d=document.getElementsByTagName("*");for(b=d.length;b--;)d[b].className===a.slice(1)&&c.push(d[b])}break;default:c=document.getElementsByTagName(a)}for(b=c.length;b--;)c[b].style.color="rgb("+this.red+", "+this.green+", "+this.blue+")"}return this}};return{Color:k,ColorSpace:{RGB:function(a,c,b){if(void 0===a||void 0===c||void 0===b)throw'Invalid parameter(s) provided for "ColorMix.ColorSpace.RGB()"';return{red:isNaN(parseInt(a))?0:parseInt(a),green:isNaN(parseInt(c))?
0:parseInt(c),blue:isNaN(parseInt(b))?0:parseInt(b)}},XYZ:function(a,c,b){if(void 0===a||void 0===c||void 0===b)throw'Invalid parameter(s) provided for "ColorMix.ColorSpace.XYZ()"';return{x:isNaN(parseFloat(a))?0:parseFloat(a),y:isNaN(parseFloat(c))?0:parseFloat(c),z:isNaN(parseFloat(b))?0:parseFloat(b)}},HSL:function(a,c,b){if(void 0===a||void 0===c||void 0===b)throw'Invalid parameter(s) provided for "ColorMix.ColorSpace.HSL()"';return{hue:isNaN(parseInt(a))?0:parseInt(a),sat:isNaN(parseInt(c))?
0:parseInt(c),lig:isNaN(parseInt(b))?0:parseInt(b)}},Lab:function(a,c,b){if(void 0===a||void 0===c||void 0===b)throw'Invalid parameter(s) provided for "ColorMix.ColorSpace.Lab()"';return{L:isNaN(parseFloat(a))?0:parseFloat(a),a:isNaN(parseFloat(c))?0:parseFloat(c),b:isNaN(parseFloat(b))?0:parseFloat(b)}},RGBtoXYZ:function(a,c,b){if(void 0!==a&&void 0!==c&&void 0!==b)b=new this.RGB(a,c,b);else if(void 0!==a&&"object"===typeof a&&void 0!==a.red&&void 0!==a.green&&void 0!==a.blue)b=new this.RGB(a.red,
a.green,a.blue);else throw'Invalid parameter(s) provided for "ColorMix.ColorSpace.RGBtoXYZ()".';a=parseFloat(b.red/255);c=parseFloat(b.green/255);b=parseFloat(b.blue/255);a=0.04045<a?Math.pow((a+0.055)/1.055,2.4):a/12.92;a*=100;c=0.04045<c?Math.pow((c+0.055)/1.055,2.4):c/12.92;c*=100;b=0.04045<b?Math.pow((b+0.055)/1.055,2.4):b/12.92;b*=100;return new this.XYZ(0.4124*a+0.3576*c+0.1805*b,0.2126*a+0.7152*c+0.0722*b,0.0193*a+0.1192*c+0.9505*b)},XYZtoRGB:function(a,c,b){var d,e;if(void 0!==a&&void 0!==
c&&void 0!==b)b=new this.XYZ(a,c,b);else if(void 0!==a&&"object"===typeof a&&void 0!==a.x&&void 0!==a.y&&void 0!==a.z)b=new this.XYZ(a.x,a.y,a.z);else throw'Invalid parameter(s) provided for "ColorMix.ColorSpace.XYZtoRGB()".';a=b.x/100;c=b.y/100;d=b.z/100;b=3.2406*a+-1.5372*c+-0.4986*d;e=-0.9689*a+1.8758*c+0.0415*d;a=0.0557*a+-0.204*c+1.057*d;b=0.0031308<b?1.055*Math.pow(b,1/2.4)-0.055:12.92*b;b*=255;e=0.0031308<e?1.055*Math.pow(e,1/2.4)-0.055:12.92*e;e*=255;a=0.0031308<a?1.055*Math.pow(a,1/2.4)-
0.055:12.92*a;a*=255;return new this.RGB(Math.round(b),Math.round(e),Math.round(a))},RGBtoHSL:function(a,c,b){if(void 0!==a&&void 0!==c&&void 0!==b)b=new this.RGB(a,c,b);else if(void 0!==a&&"object"===typeof a&&void 0!==a.red&&void 0!==a.green&&void 0!==a.blue)b=new this.RGB(a.red,a.green,a.blue);else throw'Invalid parameter(s) provided for "ColorMix.ColorSpace.RGBtoXYZ()".';a=b.red/255;c=b.green/255;b=b.blue/255;var d=Math.max(a,c,b),e=Math.min(a,c,b),f,h=(d+e)/2;if(d==e)f=e=0;else{var g=d-e,e=0.5<
h?g/(2-d-e):g/(d+e);switch(d){case a:f=(c-b)/g+(c<b?6:0);break;case c:f=(b-a)/g+2;break;case b:f=(a-c)/g+4}f/=6}return new this.HSL(Math.floor(360*f),Math.floor(100*e),Math.floor(100*h))},XYZtoLab:function(a,c,b){if(void 0!==a&&void 0!==c&&void 0!==b)b=new this.XYZ(a,c,b);else if(void 0!==a&&"object"===typeof a&&void 0!==a.x&&void 0!==a.y&&void 0!==a.z)b=new this.XYZ(a.x,a.y,a.z);else throw'Invalid parameter(s) provided for "ColorMix.ColorSpace.XYZtoLab()".';a=b.x/95.047;c=b.y/100;b=b.z/108.883;a=
0.008856<a?Math.pow(a,1/3):7.787*a+16/116;c=0.008856<c?Math.pow(c,1/3):7.787*c+16/116;b=0.008856<b?Math.pow(b,1/3):7.787*b+16/116;return new this.Lab(116*c-16,500*(a-c),200*(c-b))},LabtoXYZ:function(a,c,b){if(void 0!==a&&void 0!==c&&void 0!==b)b=new this.Lab(a,c,b);else if(void 0!==a&&"object"===typeof a&&void 0!==a.L&&void 0!==a.a&&void 0!==a.b)b=new this.Lab(a.L,a.a,a.b);else throw'Invalid parameter(s) provided for "ColorMix.ColorSpace.LabtoXYZ()".';c=(b.L+16)/116;a=b.a/500+c;b=c-b.b/200;c=0.008856<
Math.pow(c,3)?Math.pow(c,3):(c-16/116)/7.787;a=0.008856<Math.pow(a,3)?Math.pow(a,3):(a-16/116)/7.787;b=0.008856<Math.pow(b,3)?Math.pow(b,3):(b-16/116)/7.787;return new this.XYZ(95.047*a,100*c,108.883*b)},RGBtoLab:function(a,c,b){if(void 0===a||void 0===c||void 0===b)throw'Invalid parameter(s) provided for "ColorMix.ColorSpace.RGBtoLab()"';return this.XYZtoLab(this.RGBtoXYZ(a,c,b))},LabtoRGB:function(a,c,b){if(void 0===a||void 0===c||void 0===b)throw'Invalid parameter(s) provided for "ColorMix.ColorSpace.LabtoRGB()"';
return this.XYZtoRGB(this.LabtoXYZ(a,c,b))}},mix:function(a,c){if(void 0===a||"[object Array]"!==Object.prototype.toString.call(a))throw'"ColorMix.mix()" first parameter should be an array of ColorMix.Color objects';if(void 0===c){c=[];for(var b=a.length;0<b--;)c[b]=100/a.length}else if("[object Array]"!==Object.prototype.toString.call(c))throw'"ColorMix.mix()" second parameter should be an array of percents. (nnumber values)';if(a.length!==c.length)throw'"ColorMix.mix()" parameters should be arrays of the same size !';
for(var b=a.length,d=0,e=0,f=0,h=0;b--;){if(!(a[b]instanceof ColorMix.Color))throw'"ColorMix.mix()" color at index: '+b+" should be an instance of ColorMix.Color() object !";h+=c[b];if(100<h)throw'Invalid "ColorMix.mix()" second parameter: the sum of all the percents array items should be 100.';var g=ColorMix.ColorSpace.RGBtoLab(a[b].getRed(),a[b].getGreen(),a[b].getBlue()),d=d+g.L*c[b]/100,e=e+g.a*c[b]/100,f=f+g.b*c[b]/100}if(100!==h)throw'Invalid "ColorMix.mix()" second parameter: the sum of all the percents array items should be 100.';
b=ColorMix.ColorSpace.LabtoRGB(d,e,f);return new ColorMix.Color(b.red,b.green,b.blue)},setGradient:function(a){void 0!==a&&"[object Array]"===Object.prototype.toString.call(a)&&(j=a);return this},getGradient:function(){return j},blend:function(a){if(void 0===a)throw'Missing "ColorMix.blend()" first parameter.';a=parseInt(a);if(isNaN(a))throw'Invalid "ColorMix.blend()" first parameter: you should provide a number.';var c=j.length,b=j[0],d=j[c-1],e;if(a<=b.reference)return new ColorMix.Color(b.color.red,
b.color.green,b.color.blue);if(a>=d.reference)return new ColorMix.Color(d.color.red,d.color.green,d.color.blue);for(;c--;)e=j[c],e.reference<=a&&e.reference>b.reference?b=e:e.reference>=a&&e.reference<d.reference&&(d=e);c=new ColorMix.Color(b.color.red,b.color.green,b.color.blue);e=new ColorMix.Color(d.color.red,d.color.green,d.color.blue);b.percent=Math.abs(100/((b.reference-d.reference)/(a-d.reference)));d.percent=100-b.percent;return new ColorMix.mix([c,e],[b.percent,d.percent])}}}();
